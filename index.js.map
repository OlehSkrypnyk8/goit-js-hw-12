{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst perPage = 12;\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios.get(\"https://pixabay.com/api/\",{\n      params: {\n      key: \"52810941-a867c2a4f7105994d43c555c3\",\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n    return response.data;\n    \n  } catch (error) {\n    console.log(error);\n    return { hits: [], totalHits: 0 };\n  }\n}\n\n\n\n","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst galleryContainer = document.querySelector('.gallery');\nexport const loadMore = document.querySelector('.load-more');\nconst lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n\nexport function createGallery(images) {\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n            <div>\n                <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img class=\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" width=450 height=300 />\n                <div class=\"gallery-info\">\n                    <p class=\"gallery-text\"> <span class =\"span-text\">Likes</span> ${image.likes}</p>\n                    <p class=\"gallery-text\"> <span class =\"span-text\">Views</span> ${image.views}</p>\n                    <p class=\"gallery-text\"> <span class =\"span-text\">Comments</span> ${image.comments}</p>\n                    <p class=\"gallery-text\"> <span class =\"span-text\">Downloads</span> ${image.downloads}</p>\n                </div>\n            </div>\n        </li>\n    `).join('');\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\nexport function showBtn() {\n    loadMore.classList.remove('hidden')\n}\nexport function hideBtn() {\n    loadMore.classList.add('hidden')\n}","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {createGallery, clearGallery, showLoader, hideLoader,loadMore, showBtn, hideBtn} from \"./js/render-functions.js\";\n\nconst form = document.querySelector('.form');\nconst input = form.elements['search-text'];\nconst defaultPlaceholder = input.placeholder;\nform.addEventListener('submit', handleSubmit);\nloadMore.addEventListener('click', onLoadMore)\n\nlet page = 1;\nlet currentQuery = \"\";\nconst perPage = 12;\nlet totalPages = 0;\n\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n    showLoader();\n    const query = form.elements['search-text'].value.trim();\n    clearGallery();\n    if (!query) {\n        iziToast.error({\n            title: 'Error',\n            message: \"Please enter a search query.\",\n        });\n        hideLoader();\n        return;\n    }\n    currentQuery = query;\n    page = 1;\n    input.placeholder = \"\";\n    getImagesByQuery(query, page)\n        .then(data => {\n            const images = data.hits;\n            totalPages = Math.ceil(data.totalHits / perPage);\n            if (!images || images.length === 0) {\n                iziToast.error({\n                    title: 'Error',\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\"\n                });\n                \n                return;\n                \n            }\n            createGallery(images);\n            if (page < totalPages) {\n                showBtn();\n            } else {\n                hideBtn();\n            }\n        })\n        .catch(error => {\n            iziToast.error({\n                title: 'Error',\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\"\n            });\n            hideBtn();\n        })\n        .finally(() => {\n            hideLoader();\n            input.value = '';\n            input.placeholder = defaultPlaceholder;\n        });\n}\nasync function onLoadMore() {\n    page++\n    loadMore.disabled = true;\n    showLoader();\n    try {\n        const data = await getImagesByQuery(currentQuery, page);\n        const images = data.hits;\n        createGallery(images);\n        if (page >= totalPages) {\n            hideBtn();\n            iziToast.info({\n                    message: \"You've reached the end of search results.\",\n                    position: \"topRight\",\n                });\n        }\n        const card = document.querySelector(\".gallery-item\");\n        if (card)\n        {const { height } = card.getBoundingClientRect();\n        window.scrollBy({\n            left: 0,\n            top: height * 2,\n            behavior: \"smooth\"\n        })}\n        \n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: error.message || \"Something went wrong\",\n            position: \"topRight\"\n        });\n    } finally {\n        hideLoader();\n        loadMore.disabled = false;\n    }\n}\n\n\n\n\n\n\n\n\n\n\n"],"names":["perPage","getImagesByQuery","query","page","axios","error","loader","galleryContainer","loadMore","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showBtn","hideBtn","form","input","defaultPlaceholder","handleSubmit","onLoadMore","currentQuery","totalPages","event","iziToast","data","card","height"],"mappings":"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"}